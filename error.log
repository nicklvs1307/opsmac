> feedeliza-plus@1.0.0 start
> node server.js
2025-09-13 14:36:53 [info]: 	âœ… ConexÃ£o com banco de dados estabelecida
2025-09-13 14:36:57 [info]: 	ðŸš€ Servidor rodando na porta 5000
Redis Client Connected
2025-09-13 14:37:11 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:11 +0000] "OPTIONS /api/auth/me HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:11 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:11 +0000] "GET /api/auth/me HTTP/1.1" 304 - "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:19 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:19 +0000] "OPTIONS /api/auth/login HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:20 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:20 +0000] "POST /api/auth/login HTTP/1.1" 200 1516 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:20 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:20 +0000] "OPTIONS /api/iam/tree?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
[IamService] Building permission snapshot for userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d, restaurantId: aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8
2025-09-13 14:37:21 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:21 +0000] "GET /api/iam/tree?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 200 91225 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:22 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:22 +0000] "OPTIONS /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics?period=30d HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:37:22 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:22 +0000] "GET /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics?period=30d HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Promise.all (index 2)
    at async Object.getDashboardAnalytics (/app/src/domains/dashboard/dashboard.service.js:152:13)
    at async getDashboardAnalytics (/app/src/domains/dashboard/dashboard.controller.js:25:26)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:37:24 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:24 +0000] "GET /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics?period=30d HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Promise.all (index 2)
    at async Object.getDashboardAnalytics (/app/src/domains/dashboard/dashboard.service.js:152:13)
    at async getDashboardAnalytics (/app/src/domains/dashboard/dashboard.controller.js:25:26)
2025-09-13 14:37:29 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:29 +0000] "OPTIONS /api/checkin/analytics/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:37:29 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:29 +0000] "GET /api/checkin/analytics/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getCheckinAnalytics (/app/src/domains/checkin/checkin.service.js:325:39)
    at async getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:67:31)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:37:30 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:30 +0000] "GET /api/checkin/analytics/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getCheckinAnalytics (/app/src/domains/checkin/checkin.service.js:325:39)
    at async getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:67:31)
2025-09-13 14:37:39 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:39 +0000] "OPTIONS /api/iam/check HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
[IamService] Checking permission for userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d, restaurantId: aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8, featureKey: restaurants, actionKey: read, isSuperadmin: true
2025-09-13 14:37:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:40 +0000] "POST /api/iam/check HTTP/1.1" 200 60 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:40 +0000] "OPTIONS /api/admin/users HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:40 +0000] "OPTIONS /api/admin/restaurants HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:37:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:40 +0000] "GET /api/admin/users HTTP/1.1" 304 - "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:37:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:37:40 +0000] "GET /api/admin/restaurants HTTP/1.1" 304 - "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:25 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:25 +0000] "OPTIONS /api/iam/check HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
[IamService] Checking permission for userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d, restaurantId: aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8, featureKey: dashboard, actionKey: read, isSuperadmin: true
2025-09-13 14:43:26 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:26 +0000] "POST /api/iam/check HTTP/1.1" 200 60 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:26 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:26 +0000] "OPTIONS /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics?period=30d HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:26 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:26 +0000] "GET /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics?period=30d HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Promise.all (index 2)
    at async Object.getDashboardAnalytics (/app/src/domains/dashboard/dashboard.service.js:152:13)
    at async getDashboardAnalytics (/app/src/domains/dashboard/dashboard.controller.js:25:26)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:28 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:28 +0000] "GET /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics?period=30d HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async SurveyResponse.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async SurveyResponse.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async Promise.all (index 4)
    at async Object.getDashboardAnalytics (/app/src/domains/dashboard/dashboard.service.js:152:13)
    at async getDashboardAnalytics (/app/src/domains/dashboard/dashboard.controller.js:25:26)
2025-09-13 14:43:33 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:33 +0000] "OPTIONS /api/iam/check HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
[IamService] Checking permission for userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d, restaurantId: aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8, featureKey: loyalty_reports, actionKey: read, isSuperadmin: true
2025-09-13 14:43:33 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:33 +0000] "POST /api/iam/check HTTP/1.1" 200 60 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:34 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:34 +0000] "OPTIONS /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:34 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:34 +0000] "OPTIONS /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13&granularity=month HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:34 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:34 +0000] "OPTIONS /api/dashboard/rewards-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:34 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:34 +0000] "GET /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async Coupon.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async Coupon.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Promise.all (index 3)
    at async Object.getDashboardAnalytics (/app/src/domains/dashboard/dashboard.service.js:152:13)
    at async getDashboardAnalytics (/app/src/domains/dashboard/dashboard.controller.js:25:26)
2025-09-13 14:43:34 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:34 +0000] "GET /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13&granularity=month HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async SurveyResponse.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Promise.all (index 2)
    at async Object.getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.service.js:366:13)
    at async getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.controller.js:51:26)
2025-09-13 14:43:34 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:34 +0000] "GET /api/dashboard/rewards-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async Reward.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async Reward.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Object.getRewardsAnalytics (/app/src/domains/rewards/rewards.service.js:192:31)
    at async Object.getRewardsAnalytics (/app/src/domains/dashboard/dashboard.service.js:200:16)
    at async getRewardsAnalytics (/app/src/domains/dashboard/dashboard.controller.js:44:26)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:35 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:35 +0000] "GET /api/dashboard/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8/analytics HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async SurveyResponse.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async SurveyResponse.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async Promise.all (index 4)
    at async Object.getDashboardAnalytics (/app/src/domains/dashboard/dashboard.service.js:152:13)
    at async getDashboardAnalytics (/app/src/domains/dashboard/dashboard.controller.js:25:26)
2025-09-13 14:43:35 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:35 +0000] "GET /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13&granularity=month HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Promise.all (index 0)
    at async Object.getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.service.js:366:13)
    at async getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.controller.js:51:26)
2025-09-13 14:43:35 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:35 +0000] "GET /api/dashboard/rewards-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async Reward.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async Reward.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Object.getRewardsAnalytics (/app/src/domains/rewards/rewards.service.js:192:31)
    at async Object.getRewardsAnalytics (/app/src/domains/dashboard/dashboard.service.js:200:16)
    at async getRewardsAnalytics (/app/src/domains/dashboard/dashboard.controller.js:44:26)
2025-09-13 14:43:39 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:39 +0000] "OPTIONS /api/iam/check HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
[IamService] Checking permission for userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d, restaurantId: aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8, featureKey: satisfaction_reports, actionKey: read, isSuperadmin: true
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "POST /api/iam/check HTTP/1.1" 200 60 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "OPTIONS /api/surveys/analytics/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "OPTIONS /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13&granularity=month HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "OPTIONS /api/dashboard/rating-distribution?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "GET /api/dashboard/rating-distribution?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13 HTTP/1.1" 200 160 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "GET /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13&granularity=month HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Promise.all (index 0)
    at async Object.getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.service.js:366:13)
    at async getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.controller.js:51:26)
Error in getSurveyAnalytics:  Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Answer.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getSurveyAnalytics (/app/src/domains/surveys/surveys.service.js:165:32)
    at async getSurveyAnalytics (/app/src/domains/surveys/surveys.controller.js:70:31) {
  name: 'SequelizeDatabaseError',
  parent: error: column question->survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 136,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '712',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: `SELECT "Answer"."id", "Answer"."survey_response_id" AS "surveyResponseId", "Answer"."question_id" AS "questionId", "Answer"."value", "Answer"."created_at" AS "createdAt", "Answer"."updated_at" AS "updatedAt", "Answer"."survey_response_id", "Answer"."question_id", "question"."id" AS "question.id", "question"."question_type" AS "question.question_type", "question"."nps_criterion_id" AS "question.nps_criterion_id", "question->npsCriterion"."id" AS "question.npsCriterion.id", "question->npsCriterion"."name" AS "question.npsCriterion.name" FROM "answers" AS "Answer" LEFT OUTER JOIN ( "questions" AS "question" INNER JOIN "surveys" AS "question->survey" ON "question"."survey_id" = "question->survey"."id" AND "question->survey"."survey.restaurant_id" = 'aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8' LEFT OUTER JOIN "nps_criterions" AS "question->npsCriterion" ON "question"."nps_criterion_id" = "question->npsCriterion"."id" ) ON "Answer"."question_id" = "question"."id";`,
    parameters: undefined
  },
  original: error: column question->survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 136,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '712',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: `SELECT "Answer"."id", "Answer"."survey_response_id" AS "surveyResponseId", "Answer"."question_id" AS "questionId", "Answer"."value", "Answer"."created_at" AS "createdAt", "Answer"."updated_at" AS "updatedAt", "Answer"."survey_response_id", "Answer"."question_id", "question"."id" AS "question.id", "question"."question_type" AS "question.question_type", "question"."nps_criterion_id" AS "question.nps_criterion_id", "question->npsCriterion"."id" AS "question.npsCriterion.id", "question->npsCriterion"."name" AS "question.npsCriterion.name" FROM "answers" AS "Answer" LEFT OUTER JOIN ( "questions" AS "question" INNER JOIN "surveys" AS "question->survey" ON "question"."survey_id" = "question->survey"."id" AND "question->survey"."survey.restaurant_id" = 'aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8' LEFT OUTER JOIN "nps_criterions" AS "question->npsCriterion" ON "question"."nps_criterion_id" = "question->npsCriterion"."id" ) ON "Answer"."question_id" = "question"."id";`,
    parameters: undefined
  },
  sql: `SELECT "Answer"."id", "Answer"."survey_response_id" AS "surveyResponseId", "Answer"."question_id" AS "questionId", "Answer"."value", "Answer"."created_at" AS "createdAt", "Answer"."updated_at" AS "updatedAt", "Answer"."survey_response_id", "Answer"."question_id", "question"."id" AS "question.id", "question"."question_type" AS "question.question_type", "question"."nps_criterion_id" AS "question.nps_criterion_id", "question->npsCriterion"."id" AS "question.npsCriterion.id", "question->npsCriterion"."name" AS "question.npsCriterion.name" FROM "answers" AS "Answer" LEFT OUTER JOIN ( "questions" AS "question" INNER JOIN "surveys" AS "question->survey" ON "question"."survey_id" = "question->survey"."id" AND "question->survey"."survey.restaurant_id" = 'aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8' LEFT OUTER JOIN "nps_criterions" AS "question->npsCriterion" ON "question"."nps_criterion_id" = "question->npsCriterion"."id" ) ON "Answer"."question_id" = "question"."id";`,
  parameters: {}
}
2025-09-13 14:43:40 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:40 +0000] "GET /api/surveys/analytics/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Answer.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getSurveyAnalytics (/app/src/domains/surveys/surveys.service.js:165:32)
    at async getSurveyAnalytics (/app/src/domains/surveys/surveys.controller.js:70:31)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:42 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:42 +0000] "GET /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2024-09-13&end_date=2025-09-13&granularity=month HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Promise.all (index 0)
    at async Object.getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.service.js:366:13)
    at async getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.controller.js:51:26)
Error in getSurveyAnalytics:  Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Answer.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getSurveyAnalytics (/app/src/domains/surveys/surveys.service.js:165:32)
    at async getSurveyAnalytics (/app/src/domains/surveys/surveys.controller.js:70:31) {
  name: 'SequelizeDatabaseError',
  parent: error: column question->survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 136,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '712',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: `SELECT "Answer"."id", "Answer"."survey_response_id" AS "surveyResponseId", "Answer"."question_id" AS "questionId", "Answer"."value", "Answer"."created_at" AS "createdAt", "Answer"."updated_at" AS "updatedAt", "Answer"."survey_response_id", "Answer"."question_id", "question"."id" AS "question.id", "question"."question_type" AS "question.question_type", "question"."nps_criterion_id" AS "question.nps_criterion_id", "question->npsCriterion"."id" AS "question.npsCriterion.id", "question->npsCriterion"."name" AS "question.npsCriterion.name" FROM "answers" AS "Answer" LEFT OUTER JOIN ( "questions" AS "question" INNER JOIN "surveys" AS "question->survey" ON "question"."survey_id" = "question->survey"."id" AND "question->survey"."survey.restaurant_id" = 'aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8' LEFT OUTER JOIN "nps_criterions" AS "question->npsCriterion" ON "question"."nps_criterion_id" = "question->npsCriterion"."id" ) ON "Answer"."question_id" = "question"."id";`,
    parameters: undefined
  },
  original: error: column question->survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 136,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '712',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: `SELECT "Answer"."id", "Answer"."survey_response_id" AS "surveyResponseId", "Answer"."question_id" AS "questionId", "Answer"."value", "Answer"."created_at" AS "createdAt", "Answer"."updated_at" AS "updatedAt", "Answer"."survey_response_id", "Answer"."question_id", "question"."id" AS "question.id", "question"."question_type" AS "question.question_type", "question"."nps_criterion_id" AS "question.nps_criterion_id", "question->npsCriterion"."id" AS "question.npsCriterion.id", "question->npsCriterion"."name" AS "question.npsCriterion.name" FROM "answers" AS "Answer" LEFT OUTER JOIN ( "questions" AS "question" INNER JOIN "surveys" AS "question->survey" ON "question"."survey_id" = "question->survey"."id" AND "question->survey"."survey.restaurant_id" = 'aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8' LEFT OUTER JOIN "nps_criterions" AS "question->npsCriterion" ON "question"."nps_criterion_id" = "question->npsCriterion"."id" ) ON "Answer"."question_id" = "question"."id";`,
    parameters: undefined
  },
  sql: `SELECT "Answer"."id", "Answer"."survey_response_id" AS "surveyResponseId", "Answer"."question_id" AS "questionId", "Answer"."value", "Answer"."created_at" AS "createdAt", "Answer"."updated_at" AS "updatedAt", "Answer"."survey_response_id", "Answer"."question_id", "question"."id" AS "question.id", "question"."question_type" AS "question.question_type", "question"."nps_criterion_id" AS "question.nps_criterion_id", "question->npsCriterion"."id" AS "question.npsCriterion.id", "question->npsCriterion"."name" AS "question.npsCriterion.name" FROM "answers" AS "Answer" LEFT OUTER JOIN ( "questions" AS "question" INNER JOIN "surveys" AS "question->survey" ON "question"."survey_id" = "question->survey"."id" AND "question->survey"."survey.restaurant_id" = 'aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8' LEFT OUTER JOIN "nps_criterions" AS "question->npsCriterion" ON "question"."nps_criterion_id" = "question->npsCriterion"."id" ) ON "Answer"."question_id" = "question"."id";`,
  parameters: {}
}
2025-09-13 14:43:42 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:42 +0000] "GET /api/surveys/analytics/aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Answer.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getSurveyAnalytics (/app/src/domains/surveys/surveys.service.js:165:32)
    at async getSurveyAnalytics (/app/src/domains/surveys/surveys.controller.js:70:31)
2025-09-13 14:43:45 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:45 +0000] "OPTIONS /api/iam/check HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
[IamService] Checking permission for userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d, restaurantId: aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8, featureKey: survey_reports, actionKey: read, isSuperadmin: true
2025-09-13 14:43:45 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:45 +0000] "POST /api/iam/check HTTP/1.1" 200 60 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 14:43:46 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:46 +0000] "OPTIONS /api/surveys?restaurant_id=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Survey.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async listSurveys (/app/src/domains/surveys/surveys.controller.js:21:29)
2025-09-13 14:43:46 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:46 +0000] "GET /api/surveys?restaurant_id=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:47 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:47 +0000] "GET /api/surveys?restaurant_id=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Survey.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async listSurveys (/app/src/domains/surveys/surveys.controller.js:21:29)
2025-09-13 14:43:56 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:56 +0000] "OPTIONS /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2025-03-13&end_date=2025-09-13&granularity=month HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
2025-09-13 14:43:56 [info]: 	170.254.46.100 - - [13/Sep/2025:14:43:56 +0000] "GET /api/dashboard/evolution-analytics?restaurantId=aae3c602-b96c-4f53-aa9a-4e5ddf2a41b8&start_date=2025-03-13&end_date=2025-09-13&granularity=month HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Promise.all (index 0)
    at async Object.getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.service.js:366:13)
    at async getEvolutionAnalytics (/app/src/domains/dashboard/dashboard.controller.js:51:26)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d