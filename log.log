      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '89faa009-4362-4bd1-8fc3-fa77657f20f9',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '89faa009-4362-4bd1-8fc3-fa77657f20f9',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'aa439eb6-375d-4d64-a485-3ba157ca285f',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'aa439eb6-375d-4d64-a485-3ba157ca285f',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'eea6a099-edc3-456a-a14c-bea7bac9d6fe',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'eea6a099-edc3-456a-a14c-bea7bac9d6fe',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '0bbd5d0d-c188-46ec-ae48-018f65b7dc84',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '0bbd5d0d-c188-46ec-ae48-018f65b7dc84',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'fcc873c0-c553-4b7b-9118-7df02b105fda',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'fcc873c0-c553-4b7b-9118-7df02b105fda',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '292c7b7d-8828-42e0-98ec-b677f6c5ea00',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '292c7b7d-8828-42e0-98ec-b677f6c5ea00',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  }
]
averageVisitDuration: { avg_duration_seconds: '7593.8080526315789474' }
checkinsByDay: [
  { date: 2025-07-30T00:00:00.000Z, count: '5' },
  { date: 2025-07-31T00:00:00.000Z, count: '7' },
  { date: 2025-08-02T00:00:00.000Z, count: '2' },
  { date: 2025-08-03T00:00:00.000Z, count: '5' }
]
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
[Public Route] Recebida requisição para /restaurant/0e517dc5-4881-45aa-996e-0365012000bc
[Public Route] Restaurante 0e517dc5-4881-45aa-996e-0365012000bc encontrado. Retornando dados.
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
Auth Middleware - req.user (after population): {
  userId: '211aab5d-fb9a-421b-991c-fcda8bc44051',
  email: 'lucas@teste.com',
  role: 'owner',
  name: 'Lucas Niquele',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
totalCheckins: 19
mostFrequentCustomers: [
  Checkin {
    dataValues: {
      customer_id: 'c0463aa7-193d-42fc-9163-aa9c850a0546',
      checkin_count: '7',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'c0463aa7-193d-42fc-9163-aa9c850a0546',
      checkin_count: '7',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'd11fc920-e0e3-4335-98c6-73acf48b06ad',
      checkin_count: '5',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'd11fc920-e0e3-4335-98c6-73acf48b06ad',
      checkin_count: '5',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '51a4ce76-a58b-4b4a-9636-888f54403d04',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '51a4ce76-a58b-4b4a-9636-888f54403d04',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '89faa009-4362-4bd1-8fc3-fa77657f20f9',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '89faa009-4362-4bd1-8fc3-fa77657f20f9',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'aa439eb6-375d-4d64-a485-3ba157ca285f',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'aa439eb6-375d-4d64-a485-3ba157ca285f',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'eea6a099-edc3-456a-a14c-bea7bac9d6fe',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'eea6a099-edc3-456a-a14c-bea7bac9d6fe',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '0bbd5d0d-c188-46ec-ae48-018f65b7dc84',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '0bbd5d0d-c188-46ec-ae48-018f65b7dc84',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: 'fcc873c0-c553-4b7b-9118-7df02b105fda',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: 'fcc873c0-c553-4b7b-9118-7df02b105fda',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  },
  Checkin {
    dataValues: {
      customer_id: '292c7b7d-8828-42e0-98ec-b677f6c5ea00',
      checkin_count: '1',
      customer: [Customer]
    },
    _previousDataValues: {
      customer_id: '292c7b7d-8828-42e0-98ec-b677f6c5ea00',
      checkin_count: '1',
      customer: [Customer]
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: [Array],
      includeNames: [Array],
      includeMap: [Object],
      includeValidated: true,
      attributes: [Array],
      raw: true
    },
    isNewRecord: false,
    customer: Customer {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  }
]
averageVisitDuration: { avg_duration_seconds: '7593.8080526315789474' }
checkinsByDay: [
  { date: 2025-07-30T00:00:00.000Z, count: '5' },
  { date: 2025-07-31T00:00:00.000Z, count: '7' },
  { date: 2025-08-02T00:00:00.000Z, count: '2' },
  { date: 2025-08-03T00:00:00.000Z, count: '5' }
]
[Public Check-in] Requisição recebida: {
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc',
  phone_number: '5535998374007',
  cpf: undefined,
  customer_name: ''
}
[Public Check-in] Restaurante encontrado: Tower Test Settings: {
  nps_enabled: true,
  tablet_mode: false,
  auto_response: true,
  rewards_enabled: true,
  feedback_enabled: true,
  whatsapp_enabled: false,
  whatsapp_messages: {
    checkin_message_text: '',
    coupon_reminder_text: '',
    birthday_greeting_text: '',
    checkin_message_enabled: false,
    coupon_reminder_enabled: false,
    feedback_thank_you_text: '',
    birthday_greeting_enabled: false,
    feedback_thank_you_enabled: false
  },
  feedback_thank_you_text: '',
  checkin_program_settings: {
    enable_ranking: true,
    rewards_per_visit: [ [Object], [Object], [Object], [Object] ],
    checkin_cycle_name: 'Check in Roma ',
    points_per_checkin: '1',
    checkin_cycle_length: '6',
    allow_multiple_cycles: true,
    identification_method: 'phone',
    checkin_limit_per_cycle: '1',
    checkin_duration_minutes: '60',
    checkin_time_restriction: 'unlimited',
    enable_level_progression: true
  },
  feedback_thank_you_enabled: false
}
[Public Check-in] Método de Identificação: phone
[Public Check-in] Critério de busca do cliente: {
  phone: '5535998374007',
  restaurant_id: '0e517dc5-4881-45aa-996e-0365012000bc'
}
[Public Check-in] Cliente encontrado: c0463aa7-193d-42fc-9163-aa9c850a0546 Lucas
[Public Check-in] Check-in criado: 43a1daf2-7dfa-4e60-b161-65a828da3e19
[Public Check-in] total_visits do cliente incrementado para: 8
[Public Check-in] Configurações do Programa de Check-in: {
  "enable_ranking": true,
  "rewards_per_visit": [
    {
      "reward_id": "42a76eb4-d88a-4360-af2f-a0af2fe438b5",
      "visit_count": "9",
      "message_template": "📣 Parabéns, {{customer_name}}!\nVocê acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n\n🏆 Recompensa: {{reward_title}}\n🎟️ Cupom: {{coupon_code}}\n📍 Check-in número: {{visit_count}}\n\nMostre esse cupom no balcão e aproveite sua recompensa!\nContinue participando, porque tem mais prêmios te esperando. 💜\n\n#ClubeRoma #VocêMerece"
    },
    {
      "reward_id": "42a76eb4-d88a-4360-af2f-a0af2fe438b5",
      "visit_count": "10",
      "message_template": "📣 Parabéns, {{customer_name}}!\nVocê acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n\n🏆 Recompensa: {{reward_title}}\n🎟️ Cupom: {{coupon_code}}\n📍 Check-in número: {{visit_count}}\n\nMostre esse cupom no balcão e aproveite sua recompensa!\nContinue participando, porque tem mais prêmios te esperando. 💜\n\n#ClubeRoma #VocêMerece"
    },
    {
      "reward_id": "d0c070f8-270d-4053-bbb0-35c5c50ac2a6",
      "visit_count": "11",
      "message_template": "📣 Parabéns, {{customer_name}}!\nVocê acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n\n🏆 Recompensa: {{reward_title}}\n🎟️ Cupom: {{coupon_code}}\n📍 Check-in número: {{visit_count}}\n\nMostre esse cupom no balcão e aproveite sua recompensa!\nContinue participando, porque tem mais prêmios te esperando. 💜\n\n#ClubeRoma #VocêMerece"
    },
    {
      "reward_id": "42a76eb4-d88a-4360-af2f-a0af2fe438b5",
      "visit_count": "8",
      "message_template": ""
    }
  ],
  "checkin_cycle_name": "Check in Roma ",
  "points_per_checkin": "1",
  "checkin_cycle_length": "6",
  "allow_multiple_cycles": true,
  "identification_method": "phone",
  "checkin_limit_per_cycle": "1",
  "checkin_duration_minutes": "60",
  "checkin_time_restriction": "unlimited",
  "enable_level_progression": true
}
[Public Check-in] Cliente Lucas ganhou 1 pontos por check-in.
[Public Check-in] Recompensas por Visita configuradas: [
  {
    reward_id: '42a76eb4-d88a-4360-af2f-a0af2fe438b5',
    visit_count: '9',
    message_template: '📣 Parabéns, {{customer_name}}!\n' +
      'Você acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n' +

      '\n' +
      '🏆 Recompensa: {{reward_title}}\n' +
      '🎟️ Cupom: {{coupon_code}}\n' +
      '📍 Check-in número: {{visit_count}}\n' +

      '\n' +
      'Mostre esse cupom no balcão e aproveite sua recompensa!\n' +
      'Continue participando, porque tem mais prêmios te esperando. 💜\n' +

      '\n' +
      '#ClubeRoma #VocêMerece'
  },
  {
    reward_id: '42a76eb4-d88a-4360-af2f-a0af2fe438b5',
    visit_count: '10',
    message_template: '📣 Parabéns, {{customer_name}}!\n' +
      'Você acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n' +

      '\n' +
      '🏆 Recompensa: {{reward_title}}\n' +
      '🎟️ Cupom: {{coupon_code}}\n' +
      '📍 Check-in número: {{visit_count}}\n' +

      '\n' +
      'Mostre esse cupom no balcão e aproveite sua recompensa!\n' +
      'Continue participando, porque tem mais prêmios te esperando. 💜\n' +

      '\n' +
      '#ClubeRoma #VocêMerece'
  },
  {
    reward_id: 'd0c070f8-270d-4053-bbb0-35c5c50ac2a6',
    visit_count: '11',
    message_template: '📣 Parabéns, {{customer_name}}!\n' +
      'Você acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n' +

      '\n' +
      '🏆 Recompensa: {{reward_title}}\n' +
      '🎟️ Cupom: {{coupon_code}}\n' +
      '📍 Check-in número: {{visit_count}}\n' +

      '\n' +
      'Mostre esse cupom no balcão e aproveite sua recompensa!\n' +
      'Continue participando, porque tem mais prêmios te esperando. 💜\n' +

      '\n' +
      '#ClubeRoma #VocêMerece'
  },
  {
    reward_id: '42a76eb4-d88a-4360-af2f-a0af2fe438b5',
    visit_count: '8',
    message_template: ''
  }
]
[Public Check-in] Visitas atuais do cliente: 8
[Public Check-in] Processando rewardConfig: {"reward_id":"42a76eb4-d88a-4360-af2f-a0af2fe438b5","visit_count":"9","message_template":"📣 Parabéns, {{customer_name}}!\nVocê acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n\n🏆 Recompensa: {{reward_title}}\n🎟️ Cupom: {{coupon_code}}\n📍 Check-in número: {{visit_count}}\n\nMostre esse cupom no balcão e aproveite sua recompensa!\nContinue participando, porque tem mais prêmios te esperando. 💜\n\n#ClubeRoma #VocêMerece"}
[Public Check-in] Verificando recompensa para visit_count: 9 (parsed) vs currentVisits: 8
[Public Check-in] Processando rewardConfig: {"reward_id":"42a76eb4-d88a-4360-af2f-a0af2fe438b5","visit_count":"10","message_template":"📣 Parabéns, {{customer_name}}!\nVocê acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n\n🏆 Recompensa: {{reward_title}}\n🎟️ Cupom: {{coupon_code}}\n📍 Check-in número: {{visit_count}}\n\nMostre esse cupom no balcão e aproveite sua recompensa!\nContinue participando, porque tem mais prêmios te esperando. 💜\n\n#ClubeRoma #VocêMerece"}
[Public Check-in] Verificando recompensa para visit_count: 10 (parsed) vs currentVisits: 8
[Public Check-in] Processando rewardConfig: {"reward_id":"d0c070f8-270d-4053-bbb0-35c5c50ac2a6","visit_count":"11","message_template":"📣 Parabéns, {{customer_name}}!\nVocê acaba de conquistar uma nova recompensa aqui na {{restaurant_name}}! 🎉\n\n🏆 Recompensa: {{reward_title}}\n🎟️ Cupom: {{coupon_code}}\n📍 Check-in número: {{visit_count}}\n\nMostre esse cupom no balcão e aproveite sua recompensa!\nContinue participando, porque tem mais prêmios te esperando. 💜\n\n#ClubeRoma #VocêMerece"}
[Public Check-in] Verificando recompensa para visit_count: 11 (parsed) vs currentVisits: 8
[Public Check-in] Processando rewardConfig: {"reward_id":"42a76eb4-d88a-4360-af2f-a0af2fe438b5","visit_count":"8","message_template":""}
[Public Check-in] Verificando recompensa para visit_count: 8 (parsed) vs currentVisits: 8
[Public Check-in] Correspondência encontrada para visit_count: 8. Tentando buscar recompensa com ID: 42a76eb4-d88a-4360-af2f-a0af2fe438b5
[Public Check-in] Recompensa encontrada: aaaaa Objeto Reward: {"id":"42a76eb4-d88a-4360-af2f-a0af2fe438b5","title":"aaaaa","description":"1","reward_type":"spin_the_wheel","value":null,"wheel_config":{"items":[{"id":"98cbbee9-613b-4ed0-a715-adb8092523dc","color":"#abcf8a","title":"Suco de Laranja 1","textColor":"#121211","probability":10},{"id":"22b9e4e0-484a-4e60-89ca-166126fa2d21","color":"#abcf8a","title":"Suco de Laranja 2","textColor":"#121211","probability":10},{"id":"cd3c2c87-0a38-4ca7-8339-6f6e6f990679","color":"#abcf8a","title":"Suco de Laranja 3","textColor":"#121211","probability":10},{"id":"eda6d361-98d2-404e-bb3a-e63a1afb4fa8","color":"#abcf8a","title":"Suco de Laranja 4","textColor":"#121211","probability":40},{"id":"30b62fec-add7-467f-afaf-bb443946ac44","color":"#abcf8a","title":"Suco de Laranja 5","textColor":"#121211","probability":10},{"id":"1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5","color":"#abcf8a","title":"Suco de Laranja 6","textColor":"#121211","probability":10},{"id":"287f2ce3-699f-4757-8f0b-45994850e287","color":"#abcf8a","title":"Suco de abacate 7","textColor":"#121211","probability":10}]},"points_required":0,"max_uses_per_customer":null,"total_uses_limit":null,"current_uses":75,"minimum_purchase":null,"applicable_items":[],"excluded_items":[],"valid_from":null,"valid_until":null,"days_valid":null,"auto_apply":false,"requires_approval":false,"is_active":true,"is_featured":false,"image":null,"terms_conditions":null,"trigger_conditions":{},"notification_settings":{"send_push":false,"send_email":true,"send_whatsapp":false,"custom_message":""},"analytics":{"total_redeemed":1,"redemption_rate":1.7857142857142856,"total_generated":75,"average_order_value":0,"customer_satisfaction":0},"restaurant_id":"0e517dc5-4881-45aa-996e-0365012000bc","customer_id":null,"created_by":"211aab5d-fb9a-421b-991c-fcda8bc44051","createdAt":"2025-08-01T10:58:38.562Z","updatedAt":"2025-08-03T10:58:54.054Z"}
wheelService - totalProbability: 100
wheelService - randomNumber: 60.154745376364225
wheelService - Item 0: probability=10, randomNumber=60.154745376364225, condition=false
wheelService - Item 1: probability=10, randomNumber=50.154745376364225, condition=false
wheelService - Item 2: probability=10, randomNumber=40.154745376364225, condition=false
wheelService - Item 3: probability=40, randomNumber=30.154745376364225, condition=true
wheelService - Returning winning item (loop): {
  winningItem: {
    id: 'eda6d361-98d2-404e-bb3a-e63a1afb4fa8',
    color: '#abcf8a',
    title: 'Suco de Laranja 4',
    textColor: '#121211',
    probability: 40
  },
  winningIndex: 3
}
Inside Reward.js generateCoupon - spunItem: {
  id: 'eda6d361-98d2-404e-bb3a-e63a1afb4fa8',
  color: '#abcf8a',
  title: 'Suco de Laranja 4',
  textColor: '#121211',
  probability: 40
}
Inside Reward.js generateCoupon - spunIndex: 3
Wheel config items sent to spinWheel: [
  {
    id: '98cbbee9-613b-4ed0-a715-adb8092523dc',
    color: '#abcf8a',
    title: 'Suco de Laranja 1',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '22b9e4e0-484a-4e60-89ca-166126fa2d21',
    color: '#abcf8a',
    title: 'Suco de Laranja 2',
    textColor: '#121211',
    probability: 10
  },
  {
    id: 'cd3c2c87-0a38-4ca7-8339-6f6e6f990679',
    color: '#abcf8a',
    title: 'Suco de Laranja 3',
    textColor: '#121211',
    probability: 10
  },
  {
    id: 'eda6d361-98d2-404e-bb3a-e63a1afb4fa8',
    color: '#abcf8a',
    title: 'Suco de Laranja 4',
    textColor: '#121211',
    probability: 40
  },
  {
    id: '30b62fec-add7-467f-afaf-bb443946ac44',
    color: '#abcf8a',
    title: 'Suco de Laranja 5',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5',
    color: '#abcf8a',
    title: 'Suco de Laranja 6',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '287f2ce3-699f-4757-8f0b-45994850e287',
    color: '#abcf8a',
    title: 'Suco de abacate 7',
    textColor: '#121211',
    probability: 10
  }
]
Winning item from spinWheel: {
  id: 'eda6d361-98d2-404e-bb3a-e63a1afb4fa8',
  color: '#abcf8a',
  title: 'Suco de Laranja 4',
  textColor: '#121211',
  probability: 40
}
Winning index from spinWheel: 3
wheelService - totalProbability: 100
wheelService - randomNumber: 86.3565055569602
wheelService - Item 0: probability=10, randomNumber=86.3565055569602, condition=false
wheelService - Item 1: probability=10, randomNumber=76.3565055569602, condition=false
wheelService - Item 2: probability=10, randomNumber=66.3565055569602, condition=false
wheelService - Item 3: probability=40, randomNumber=56.3565055569602, condition=false
wheelService - Item 4: probability=10, randomNumber=16.3565055569602, condition=false
wheelService - Item 5: probability=10, randomNumber=6.356505556960201, condition=true
wheelService - Returning winning item (loop): {
  winningItem: {
    id: '1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5',
    color: '#abcf8a',
    title: 'Suco de Laranja 6',
    textColor: '#121211',
    probability: 10
  },
  winningIndex: 5
}
Inside Reward.js generateCoupon - spunItem: {
  id: '1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5',
  color: '#abcf8a',
  title: 'Suco de Laranja 6',
  textColor: '#121211',
  probability: 10
}
Inside Reward.js generateCoupon - spunIndex: 5
Wheel config items sent to spinWheel: [
  {
    id: '98cbbee9-613b-4ed0-a715-adb8092523dc',
    color: '#abcf8a',
    title: 'Suco de Laranja 1',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '22b9e4e0-484a-4e60-89ca-166126fa2d21',
    color: '#abcf8a',
    title: 'Suco de Laranja 2',
    textColor: '#121211',
    probability: 10
  },
  {
    id: 'cd3c2c87-0a38-4ca7-8339-6f6e6f990679',
    color: '#abcf8a',
    title: 'Suco de Laranja 3',
    textColor: '#121211',
    probability: 10
  },
  {
    id: 'eda6d361-98d2-404e-bb3a-e63a1afb4fa8',
    color: '#abcf8a',
    title: 'Suco de Laranja 4',
    textColor: '#121211',
    probability: 40
  },
  {
    id: '30b62fec-add7-467f-afaf-bb443946ac44',
    color: '#abcf8a',
    title: 'Suco de Laranja 5',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5',
    color: '#abcf8a',
    title: 'Suco de Laranja 6',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '287f2ce3-699f-4757-8f0b-45994850e287',
    color: '#abcf8a',
    title: 'Suco de abacate 7',
    textColor: '#121211',
    probability: 10
  }
]
Winning item from spinWheel: {
  id: '1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5',
  color: '#abcf8a',
  title: 'Suco de Laranja 6',
  textColor: '#121211',
  probability: 10
}
Winning index from spinWheel: 5
wheelService - totalProbability: 100
wheelService - randomNumber: 97.81619029522206
wheelService - Item 0: probability=10, randomNumber=97.81619029522206, condition=false
wheelService - Item 1: probability=10, randomNumber=87.81619029522206, condition=false
wheelService - Item 2: probability=10, randomNumber=77.81619029522206, condition=false
wheelService - Item 3: probability=40, randomNumber=67.81619029522206, condition=false
wheelService - Item 4: probability=10, randomNumber=27.816190295222057, condition=false
wheelService - Item 5: probability=10, randomNumber=17.816190295222057, condition=false
wheelService - Item 6: probability=10, randomNumber=7.816190295222057, condition=true
wheelService - Returning winning item (loop): {
  winningItem: {
    id: '287f2ce3-699f-4757-8f0b-45994850e287',
    color: '#abcf8a',
    title: 'Suco de abacate 7',
    textColor: '#121211',
    probability: 10
  },
  winningIndex: 6
}
Inside Reward.js generateCoupon - spunItem: {
  id: '287f2ce3-699f-4757-8f0b-45994850e287',
  color: '#abcf8a',
  title: 'Suco de abacate 7',
  textColor: '#121211',
  probability: 10
}
Inside Reward.js generateCoupon - spunIndex: 6
Wheel config items sent to spinWheel: [
  {
    id: '98cbbee9-613b-4ed0-a715-adb8092523dc',
    color: '#abcf8a',
    title: 'Suco de Laranja 1',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '22b9e4e0-484a-4e60-89ca-166126fa2d21',
    color: '#abcf8a',
    title: 'Suco de Laranja 2',
    textColor: '#121211',
    probability: 10
  },
  {
    id: 'cd3c2c87-0a38-4ca7-8339-6f6e6f990679',
    color: '#abcf8a',
    title: 'Suco de Laranja 3',
    textColor: '#121211',
    probability: 10
  },
  {
    id: 'eda6d361-98d2-404e-bb3a-e63a1afb4fa8',
    color: '#abcf8a',
    title: 'Suco de Laranja 4',
    textColor: '#121211',
    probability: 40
  },
  {
    id: '30b62fec-add7-467f-afaf-bb443946ac44',
    color: '#abcf8a',
    title: 'Suco de Laranja 5',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '1e4bbe2c-ef29-4ac8-b5b5-a4c6f7f96ab5',
    color: '#abcf8a',
    title: 'Suco de Laranja 6',
    textColor: '#121211',
    probability: 10
  },
  {
    id: '287f2ce3-699f-4757-8f0b-45994850e287',
    color: '#abcf8a',
    title: 'Suco de abacate 7',
    textColor: '#121211',
    probability: 10
  }
]
Winning item from spinWheel: {
  id: '287f2ce3-699f-4757-8f0b-45994850e287',
  color: '#abcf8a',
  title: 'Suco de abacate 7',
  textColor: '#121211',
  probability: 10
}
Winning index from spinWheel: 6