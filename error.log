> feedeliza-plus@1.0.0 start
> node backend/server.js
Redis Client Connected
‚úÖ Conex√£o com banco de dados estabelecida
üöÄ Servidor rodando na porta 5000
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: /iam/tree - userId: b4f05165-0144-4a9a-ab20-c8a417739f55 restaurantId: a42013f2-2970-4a72-b94c-6c8ed3e09fc9
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}
DEBUG: User object after findByPk in getMe: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "email": "lucas@teste.com",
  "name": "Lucas Niquele",
  "phone": "3598989898",
  "passwordHash": "$2a$10$Br1OHN5a3FMQz/fCMqfYQe43Y2O75L/NsO2Asuj1PHUDoL3bvAyke",
  "isSuperadmin": false,
  "loginAttempts": 0,
  "lockUntil": null,
  "isActive": true,
  "createdAt": "2025-09-08T00:14:43.064Z",
  "updatedAt": "2025-09-08T02:06:13.421Z",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "restaurants": [
    {
      "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "isOwner": true,
      "createdAt": "2025-09-08T00:14:43.111Z",
      "updatedAt": "2025-09-08T00:14:43.111Z",
      "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
      "restaurant": {
        "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "name": "Towersfy",
        "slug": "towersfy",
        "description": "123456",
        "address": "Rua Avenida Brasil",
        "city": "Andradas",
        "state": "MG",
        "zipCode": null,
        "phone": null,
        "email": null,
        "website": null,
        "logo": null,
        "planKey": null,
        "status": "active",
        "permVersion": "1",
        "createdAt": "2025-09-08T00:14:43.104Z",
        "updatedAt": "2025-09-08T00:14:43.104Z"
      }
    }
  ]
}
Error caught by middleware: ForbiddenError: Acesso negado. Usu√°rio n√£o est√° associado a um restaurante.
    at checkRestaurantOwnership (/app/backend/src/middleware/checkRestaurantOwnershipMiddleware.js:24:19)
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at authMiddleware (/app/backend/src/middleware/authMiddleware.js:38:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  statusCode: 403
}
DEBUG: authMiddleware - req.user after assignment: {
  "id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
  "name": "Lucas Niquele",
  "email": "lucas@teste.com",
  "phone": "3598989898",

  "roles": [
    {
      "id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
      "restaurantId": null,
      "key": "owner",
      "name": "owner",
      "isSystem": true,
      "createdAt": "2025-09-08T00:12:53.800Z",
      "updatedAt": "2025-09-08T00:12:53.800Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurantId": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
        "roleId": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "createdAt": "2025-09-08T00:14:43.117Z",
        "updatedAt": "2025-09-08T00:14:43.117Z",
        "role_id": "26f17709-d148-46df-8d76-ec234bbc5f6d",
        "user_id": "b4f05165-0144-4a9a-ab20-c8a417739f55",
        "restaurant_id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "a42013f2-2970-4a72-b94c-6c8ed3e09fc9",
      "name": "Towersfy",
      "slug": "towersfy",
      "description": "123456",
      "address": "Rua Avenida Brasil",
      "city": "Andradas",
      "state": "MG",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-08T00:14:43.104Z",
      "updatedAt": "2025-09-08T00:14:43.104Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "permissionSnapshot": null
}
DEBUG: checkRestaurantOwnership - req.params: { restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9' }
DEBUG: checkRestaurantOwnership - req.query: {}
DEBUG: checkRestaurantOwnership - req.body: {}

AuthContext.js:82 AuthContext useEffect: Running
AuthContext.js:84 AuthContext useEffect: Token from localStorage: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJiNGYwNTE2NS0wMTQ0LTRhOWEtYWIyMC1jOGE0MTc3MzlmNTUiLCJpYXQiOjE3NTcyOTcxNzMsImV4cCI6MTc1NzkwMTk3M30.xBxhOqSUwU99D3WICt2b_5j-4sDecQADOttuIgFJWkU
AuthContext.js:88 AuthContext useEffect: Attempting to fetch /auth/me
AuthContext.js:92 AuthContext useEffect: /auth/me successful {user: {‚Ä¶}}
AuthContext.js:99 AuthContext useEffect: Attempting to fetch /iam/tree
settings:1 Error while trying to use the following icon from the Manifest: https://feedelizapro.towersfy.com/logo192.png (Download error or resource isn't a valid image)
AuthContext.js:106 AuthContext useEffect: /iam/tree successful {restaurantId: 'a42013f2-2970-4a72-b94c-6c8ed3e09fc9', userId: 'b4f05165-0144-4a9a-ab20-c8a417739f55', isSuperAdmin: false, isOwner: true, modules: Array(8)}
main.ad9d39e5.js:2 [Violation] 'message' handler took 213ms
[Violation] Forced reflow while executing JavaScript took 31ms
satisfactionSettingsService.js:7  GET https://feedelizaapi.towersfy.com/api/nps-criteria 401 (Unauthorized)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
q7 @ satisfactionSettingsService.js:7
fetchFn @ query.js:300
c @ retryer.js:95
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
satisfactionSettingsService.js:24  GET https://feedelizaapi.towersfy.com/api/settings/a42013f2-2970-4a72-b94c-6c8ed3e09fc9 403 (Forbidden)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
(an√¥nimo) @ satisfactionSettingsService.js:24
K7.enabled @ satisfactionSettingsService.js:78
fetchFn @ query.js:300
c @ retryer.js:95
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
couponQueries.js:21  GET https://feedelizaapi.towersfy.com/api/rewards/restaurant/a42013f2-2970-4a72-b94c-6c8ed3e09fc9 403 (Forbidden)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
(an√¥nimo) @ couponQueries.js:21
enabled @ couponQueries.js:78
fetchFn @ query.js:300
c @ retryer.js:95
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
satisfactionSettingsService.js:7  GET https://feedelizaapi.towersfy.com/api/nps-criteria 401 (Unauthorized)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
q7 @ satisfactionSettingsService.js:7
fetchFn @ query.js:300
c @ retryer.js:95
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
query.js:358 bt¬†{message: 'Request failed with status code 401', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {‚Ä¶}, request: XMLHttpRequest,¬†‚Ä¶}
onError @ query.js:358
f @ retryer.js:67
(an√¥nimo) @ retryer.js:132
Promise.catch
c @ retryer.js:116
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
satisfactionSettingsService.js:24  GET https://feedelizaapi.towersfy.com/api/settings/a42013f2-2970-4a72-b94c-6c8ed3e09fc9 403 (Forbidden)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
(an√¥nimo) @ satisfactionSettingsService.js:24
K7.enabled @ satisfactionSettingsService.js:78
fetchFn @ query.js:300
c @ retryer.js:95
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
query.js:358 bt¬†{message: 'Request failed with status code 403', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {‚Ä¶}, request: XMLHttpRequest,¬†‚Ä¶}
onError @ query.js:358
f @ retryer.js:67
(an√¥nimo) @ retryer.js:132
Promise.catch
c @ retryer.js:116
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
couponQueries.js:21  GET https://feedelizaapi.towersfy.com/api/rewards/restaurant/a42013f2-2970-4a72-b94c-6c8ed3e09fc9 403 (Forbidden)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
(an√¥nimo) @ couponQueries.js:21
enabled @ couponQueries.js:78
fetchFn @ query.js:300
c @ retryer.js:95
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
query.js:358 bt¬†{message: 'Request failed with status code 403', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {‚Ä¶}, request: XMLHttpRequest,¬†‚Ä¶}
onError @ query.js:358
f @ retryer.js:67
(an√¥nimo) @ retryer.js:132
Promise.catch
c @ retryer.js:116
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
lc @ react-dom.production.min.js:272
qa @ react-dom.production.min.js:127
(an√¥nimo) @ react-dom.production.min.js:282
jc @ react-dom.production.min.js:280
ac @ react-dom.production.min.js:269
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
