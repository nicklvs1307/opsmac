main.ea839172.js:sourcemap:2 AuthContext useEffect: Running
main.ea839172.js:sourcemap:2 AuthContext useEffect: Token from localStorage: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJhZGY5NTI2OS0xYWJkLTQwYjMtYTBiYy02ZmI4Y2UxMmNlZjQiLCJpYXQiOjE3NTc1MzE5NTgsImV4cCI6MTc1ODEzNjc1OH0.yKLGiI9NKrEjL5CEdY1GhyZQpnjoDO9_6iiw9KbaZdU
main.ea839172.js:sourcemap:2 AuthContext useEffect: Attempting to fetch /auth/me
main.ea839172.js:sourcemap:2 AuthContext useEffect: /auth/me successful {user: {…}}
main.ea839172.js:sourcemap:2 AuthContext useEffect: Attempting to fetch /iam/tree
main.ea839172.js:sourcemap:2 AuthContext useEffect: /iam/tree successful {restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446', userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4', isSuperAdmin: false, isOwner: true, modules: Array(8)}
main.ea839172.js:sourcemap:2 [Violation] 'message' handler took 226ms
[Violation] Forced reflow while executing JavaScript took 34ms
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/checkin/analytics/b3adad74-2fd6-47eb-a356-e5fe3c83c446 500 (Internal Server Error)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
ac @ main.ea839172.js:sourcemap:2
_ @ main.ea839172.js:sourcemap:2
P @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/checkin/analytics/b3adad74-2fd6-47eb-a356-e5fe3c83c446 500 (Internal Server Error)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
ac @ main.ea839172.js:sourcemap:2
_ @ main.ea839172.js:sourcemap:2
P @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2 bt {message: 'Request failed with status code 500', name: 'AxiosError', code: 'ERR_BAD_RESPONSE', config: {…}, request: XMLHttpRequest, …}
onError @ main.ea839172.js:sourcemap:2
f @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
ac @ main.ea839172.js:sourcemap:2
_ @ main.ea839172.js:sourcemap:2
P @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2 [Violation] 'click' handler took 238ms
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/dashboard/b3adad74-2fd6-47eb-a356-e5fe3c83c446/analytics?period=30d 404 (Not Found)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/dashboard/b3adad74-2fd6-47eb-a356-e5fe3c83c446/analytics?period=30d 404 (Not Found)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2 bt {message: 'Request failed with status code 404', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {…}, request: XMLHttpRequest, …}
onError @ main.ea839172.js:sourcemap:2
f @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2 Error fetching dashboard data: bt {message: 'Request failed with status code 404', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {…}, request: XMLHttpRequest, …}
onError @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
notifyFn @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
cc @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
k @ main.ea839172.js:sourcemap:2
t.flush @ main.ea839172.js:sourcemap:2
t.batch @ main.ea839172.js:sourcemap:2
t.dispatch @ main.ea839172.js:sourcemap:2
onError @ main.ea839172.js:sourcemap:2
f @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2 Error fetching dashboard data: bt {message: 'Request failed with status code 404', name: 'AxiosError', code: 'ERR_BAD_REQUEST', config: {…}, request: XMLHttpRequest, …}
hV @ main.ea839172.js:sourcemap:2
vi @ main.ea839172.js:sourcemap:2
As @ main.ea839172.js:sourcemap:2
wl @ main.ea839172.js:sourcemap:2
bc @ main.ea839172.js:sourcemap:2
gc @ main.ea839172.js:sourcemap:2
vc @ main.ea839172.js:sourcemap:2
ac @ main.ea839172.js:sourcemap:2
_ @ main.ea839172.js:sourcemap:2
P @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/survey/analytics/b3adad74-2fd6-47eb-a356-e5fe3c83c446 500 (Internal Server Error)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
W7.enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/survey/analytics/b3adad74-2fd6-47eb-a356-e5fe3c83c446 500 (Internal Server Error)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
W7.enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2 bt {message: 'Request failed with status code 500', name: 'AxiosError', code: 'ERR_BAD_RESPONSE', config: {…}, request: XMLHttpRequest, …}
onError @ main.ea839172.js:sourcemap:2
f @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.then
(anônimo) @ main.ea839172.js:sourcemap:2
Promise.catch
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/rewards/b3adad74-2fd6-47eb-a356-e5fe3c83c446 500 (Internal Server Error)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/npsCriteria 403 (Forbidden)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
$7 @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
main.ea839172.js:sourcemap:2  GET https://feedelizaapi.towersfy.com/api/settings/b3adad74-2fd6-47eb-a356-e5fe3c83c446 403 (Forbidden)
(anônimo) @ main.ea839172.js:sourcemap:2
xhr @ main.ea839172.js:sourcemap:2
Ur @ main.ea839172.js:sourcemap:2
Promise.then
_request @ main.ea839172.js:sourcemap:2
request @ main.ea839172.js:sourcemap:2
Xr.<computed> @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
Z7.enabled @ main.ea839172.js:sourcemap:2
fetchFn @ main.ea839172.js:sourcemap:2
c @ main.ea839172.js:sourcemap:2
u @ main.ea839172.js:sourcemap:2
t.fetch @ main.ea839172.js:sourcemap:2
r.executeFetch @ main.ea839172.js:sourcemap:2
r.onSubscribe @ main.ea839172.js:sourcemap:2
t.subscribe @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
nl @ main.ea839172.js:sourcemap:2
_c @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2
jc @ main.ea839172.js:sourcemap:2
lc @ main.ea839172.js:sourcemap:2
qa @ main.ea839172.js:sourcemap:2
(anônimo) @ main.ea839172.js:sourcemap:2


> feedeliza-plus@1.0.0 start
> node server.js
✅ Conexão com banco de dados estabelecida
🚀 Servidor rodando na porta 5000
Redis Client Connected
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
TypeError: Cannot read properties of undefined (reading 'id')
    at getActiveCheckins (/app/src/domains/checkin/checkin.controller.js:72:49)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at /app/src/middleware/requirePermission.js:31:14
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
TypeError: Cannot read properties of undefined (reading 'id')
    at getActiveCheckins (/app/src/domains/checkin/checkin.controller.js:72:49)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at /app/src/middleware/requirePermission.js:31:14
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
ReferenceError: NotFoundError is not defined
    at Object.getRewardById (/app/src/domains/rewards/rewards.service.js:29:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getRewardById (/app/src/domains/rewards/rewards.controller.js:24:28)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
ForbiddenError: Acesso negado. Você não tem permissão para realizar esta ação.
    at /app/src/middleware/requirePermission.js:37:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
ReferenceError: NotFoundError is not defined
    at Object.getRewardById (/app/src/domains/rewards/rewards.service.js:29:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getRewardById (/app/src/domains/rewards/rewards.controller.js:24:28)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
ForbiddenError: Acesso negado. Você não tem permissão para realizar esta ação.
    at /app/src/middleware/requirePermission.js:37:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
TypeError: Cannot read properties of undefined (reading 'id')
    at getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:65:49)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at middleware (/app/node_modules/express-validator/lib/middlewares/check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
TypeError: Cannot read properties of undefined (reading 'id')
    at getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:65:49)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at middleware (/app/node_modules/express-validator/lib/middlewares/check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
TypeError: Cannot read properties of undefined (reading 'id')
    at getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:65:49)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at middleware (/app/node_modules/express-validator/lib/middlewares/check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
TypeError: Cannot read properties of undefined (reading 'id')
    at getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:65:49)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at middleware (/app/node_modules/express-validator/lib/middlewares/check.js:16:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
Error in getSurveyAnalytics:  Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Object.getSurveyAnalytics (/app/src/domains/survey/survey.service.js:156:36)
    at async getSurveyAnalytics (/app/src/domains/survey/survey.controller.js:67:31) {
  name: 'SequelizeDatabaseError',
  parent: error: column survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 126,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '177',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: 'SELECT count("SurveyResponse"."id") AS "count" FROM "survey_responses" AS "SurveyResponse" INNER JOIN "surveys" AS "survey" ON "SurveyResponse"."survey_id" = "survey"."id" AND "survey"."survey.restaurant_id" IS NULL;',
    parameters: undefined
  },
  original: error: column survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 126,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '177',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: 'SELECT count("SurveyResponse"."id") AS "count" FROM "survey_responses" AS "SurveyResponse" INNER JOIN "surveys" AS "survey" ON "SurveyResponse"."survey_id" = "survey"."id" AND "survey"."survey.restaurant_id" IS NULL;',
    parameters: undefined
  },
  sql: 'SELECT count("SurveyResponse"."id") AS "count" FROM "survey_responses" AS "SurveyResponse" INNER JOIN "surveys" AS "survey" ON "SurveyResponse"."survey_id" = "survey"."id" AND "survey"."survey.restaurant_id" IS NULL;',
  parameters: {}
}
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Object.getSurveyAnalytics (/app/src/domains/survey/survey.service.js:156:36)
    at async getSurveyAnalytics (/app/src/domains/survey/survey.controller.js:67:31)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
Error in getSurveyAnalytics:  Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Object.getSurveyAnalytics (/app/src/domains/survey/survey.service.js:156:36)
    at async getSurveyAnalytics (/app/src/domains/survey/survey.controller.js:67:31) {
  name: 'SequelizeDatabaseError',
  parent: error: column survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 126,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '177',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: 'SELECT count("SurveyResponse"."id") AS "count" FROM "survey_responses" AS "SurveyResponse" INNER JOIN "surveys" AS "survey" ON "SurveyResponse"."survey_id" = "survey"."id" AND "survey"."survey.restaurant_id" IS NULL;',
    parameters: undefined
  },
  original: error: column survey.survey.restaurant_id does not exist
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 126,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '177',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_relation.c',
    line: '3647',
    routine: 'errorMissingColumn',
    sql: 'SELECT count("SurveyResponse"."id") AS "count" FROM "survey_responses" AS "SurveyResponse" INNER JOIN "surveys" AS "survey" ON "SurveyResponse"."survey_id" = "survey"."id" AND "survey"."survey.restaurant_id" IS NULL;',
    parameters: undefined
  },
  sql: 'SELECT count("SurveyResponse"."id") AS "count" FROM "survey_responses" AS "SurveyResponse" INNER JOIN "surveys" AS "survey" ON "SurveyResponse"."survey_id" = "survey"."id" AND "survey"."survey.restaurant_id" IS NULL;',
  parameters: {}
}
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.rawSelect (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:434:18)
    at async SurveyResponse.aggregate (/app/node_modules/sequelize/lib/model.js:1277:19)
    at async SurveyResponse.count (/app/node_modules/sequelize/lib/model.js:1306:20)
    at async Object.getSurveyAnalytics (/app/src/domains/survey/survey.service.js:156:36)
    at async getSurveyAnalytics (/app/src/domains/survey/survey.controller.js:67:31)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
ReferenceError: NotFoundError is not defined
    at Object.getRewardById (/app/src/domains/rewards/rewards.service.js:29:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getRewardById (/app/src/domains/rewards/rewards.controller.js:24:28)
ForbiddenError: Usuário não está associado a um restaurante.
    at listNpsCriteria (/app/src/domains/npsCriteria/npsCriteria.controller.js:18:23)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at /app/src/middleware/requirePermission.js:31:14
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
ForbiddenError: Acesso negado. Você não tem permissão para realizar esta ação.
    at /app/src/middleware/requirePermission.js:37:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
req.user in requirePermission: {
  id: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
  name: 'Lucas Niquele',
  email: 'lucas@teste.com',
  phone: '3598989898',
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: Restaurant {
    dataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    _previousDataValues: {
      id: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
      name: 'Towersfy',
      slug: 'towersfy',
      description: 'Otimo',
      address: 'Avenida Doutor Bias Fortes 52',
      city: 'Andradas',
      state: 'MG',
      zipCode: null,
      phone: null,
      email: null,
      website: null,
      logo: null,
      planKey: null,
      status: 'active',
      permVersion: '1',
      createdAt: 2025-09-08T14:09:57.257Z,
      updatedAt: 2025-09-08T14:09:57.257Z
    },
    uniqno: 1,
    _changed: Set(0) {},
    _options: {
      isNewRecord: false,
      _schema: null,
      _schemaDelimiter: '',
      include: undefined,
      includeNames: undefined,
      includeMap: undefined,
      includeValidated: true,
      raw: true,
      attributes: undefined
    },
    isNewRecord: false
  },
  restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
  isSuperadmin: false,
  permissionSnapshot: {
    restaurantId: 'b3adad74-2fd6-47eb-a356-e5fe3c83c446',
    userId: 'adf95269-1abd-40b3-a0bc-6fb8ce12cef4',
    isSuperAdmin: false,
    isOwner: true,
    modules: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ]
  }
}
req.user.isSuperadmin in requirePermission: false
ReferenceError: NotFoundError is not defined
    at Object.getRewardById (/app/src/domains/rewards/rewards.service.js:29:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async getRewardById (/app/src/domains/rewards/rewards.controller.js:24:28)
ForbiddenError: Usuário não está associado a um restaurante.
    at listNpsCriteria (/app/src/domains/npsCriteria/npsCriteria.controller.js:18:23)
    at /app/src/utils/asyncHandler.js:3:25
    at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
    at next (/app/node_modules/express/lib/router/route.js:149:13)
    at /app/src/middleware/requirePermission.js:31:14
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
ForbiddenError: Acesso negado. Você não tem permissão para realizar esta ação.
    at /app/src/middleware/requirePermission.js:37:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)