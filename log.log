Swagger JSDoc options.apis: [ '/app/backend/routes/*.js' ]
Generated Swagger Specs (first 500 chars): {
  "openapi": "3.0.0",
  "info": {
    "title": "Check Test API",
    "version": "1.0.0",
    "description": "API documentation for the Check Test application."
  },
  "servers": [
    {
      "url": "http://localhost:5000/api",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Public API",
      "description": "Endpoints acessÃ­veis via API Token para integraÃ§Ã£o externa."
    },
    {
      "name": "Admin",
      "description": "Gerenciamento de usuÃ¡rios e res
âœ… ConexÃ£o com banco de dados estabelecida
ðŸš€ Servidor rodando na porta 5000
ðŸ“Š Dashboard: https://feedelizapro.towersfy.com
ðŸ”— API: https://feedelizaapi.towersfy.com/api
Erro ao obter recompensa: Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Reward.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Reward.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async Reward.findByPk (/app/node_modules/sequelize/lib/model.js:1221:12)
    at async /app/backend/routes/rewards.js:42:24 {
  name: 'SequelizeDatabaseError',
  parent: error: invalid input syntax for type uuid: "analytics"
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 109,
    severity: 'ERROR',
    code: '22P02',
    detail: undefined,
    hint: undefined,
    position: '587',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'uuid.c',
    line: '134',
    routine: 'string_to_uuid',
    sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
    parameters: undefined
  },
  original: error: invalid input syntax for type uuid: "analytics"
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 109,
    severity: 'ERROR',
    code: '22P02',
    detail: undefined,
    hint: undefined,
    position: '587',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'uuid.c',
    line: '134',
    routine: 'string_to_uuid',
    sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
    parameters: undefined
  },
  sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
  parameters: {}
}


URL da solicitaÃ§Ã£o
https://feedelizaapi.towersfy.com/public/surveys/towersfy/feedback-do-cardapio
MÃ©todo da solicitaÃ§Ã£o
GET
CÃ³digo de status
304 Not Modified
EndereÃ§o remoto
95.217.16.187:443


{
    "survey": {
        "id": "5908fc50-0970-4c2c-b9d5-33c71f19e8b3",
        "title": "Feedback do CardÃ¡pio",
        "description": "Ajude-nos a entender o que vocÃª pensa sobre nossas opÃ§Ãµes de pratos.",
        "type": "menu_feedback",
        "slug": "feedback-do-cardapio",
        "questions": [
            {
                "id": "fa2bf415-7660-4dc7-a41f-218ab9094ecc",
                "question_text": "Quais pratos vocÃª mais gostou?",
                "question_type": "textarea",
                "options": null,
                "order": 1,
                "npsCriterion": null
            },
            {
                "id": "70088561-226a-477f-a20c-f4b2536ade1d",
                "question_text": "Quais pratos vocÃª menos gostou?",
                "question_type": "textarea",
                "options": null,
                "order": 2,
                "npsCriterion": null
            },
            {
                "id": "73fa813b-163f-4e46-9bf4-9f24afd54d4f",
                "question_text": "Existe algo que vocÃª gostaria de ver em nosso cardÃ¡pio?",
                "question_type": "textarea",
                "options": null,
                "order": 3,
                "npsCriterion": null
            }
        ],
        "restaurant": {
            "name": "Towersfy",
            "logo": "/uploads/logo-1755461951500-626838863.png",
            "slug": "towersfy",
            "settings": {
                "enabled_modules": [
                    "customer_segmentation",
                    "ifood_integration",
                    "google_my_business_integration",
                    "saipos_integration",
                    "uai_rango_integration",
                    "delivery_much_integration",
                    "checkin_program",
                    "coupons_rewards",
                    "whatsapp_messaging",
                    "surveys_feedback"
                ],
                "checkin_program_settings": {
                    "enable_ranking": true,
                    "restaurant_slug": "towersfy",
                    "rewards_per_visit": [
                        {
                            "reward_id": "a3a303da-a022-49a9-ac3d-b14ed2355c9b",
                            "visit_count": "1",
                            "message_template": "aa"
                        }
                    ],
                    "identification_method": "phone",
                    "enable_level_progression": true,
                    "require_coupon_for_checkin": false
                }
            }
        }
    },
    "restaurant": {
        "name": "Towersfy",
        "logo": "/uploads/logo-1755461951500-626838863.png",
        "slug": "towersfy",
        "settings": {
            "enabled_modules": [
                "customer_segmentation",
                "ifood_integration",
                "google_my_business_integration",
                "saipos_integration",
                "uai_rango_integration",
                "delivery_much_integration",
                "checkin_program",
                "coupons_rewards",
                "whatsapp_messaging",
                "surveys_feedback"
            ],
            "checkin_program_settings": {
                "enable_ranking": true,
                "restaurant_slug": "towersfy",
                "rewards_per_visit": [
                    {
                        "reward_id": "a3a303da-a022-49a9-ac3d-b14ed2355c9b",
                        "visit_count": "1",
                        "message_template": "aa"
                    }
                ],
                "identification_method": "phone",
                "enable_level_progression": true,
                "require_coupon_for_checkin": false
            }
        }
    }
}
> Feedeliza+@1.0.0 start
> node backend/server.js
Swagger JSDoc options.apis: [ '/app/backend/routes/*.js' ]
Generated Swagger Specs (first 500 chars): {
  "openapi": "3.0.0",
  "info": {
    "title": "Check Test API",
    "version": "1.0.0",
    "description": "API documentation for the Check Test application."
  },
  "servers": [
    {
      "url": "http://localhost:5000/api",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Public API",
      "description": "Endpoints acessÃ­veis via API Token para integraÃ§Ã£o externa."
    },
    {
      "name": "Admin",
      "description": "Gerenciamento de usuÃ¡rios e res
âœ… ConexÃ£o com banco de dados estabelecida
ðŸš€ Servidor rodando na porta 5000
ðŸ“Š Dashboard: https://feedelizapro.towersfy.com
ðŸ”— API: https://feedelizaapi.towersfy.com/api
Erro ao obter recompensa: Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Reward.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Reward.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async Reward.findByPk (/app/node_modules/sequelize/lib/model.js:1221:12)
    at async /app/backend/routes/rewards.js:42:24 {
  name: 'SequelizeDatabaseError',
  parent: error: invalid input syntax for type uuid: "analytics"
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 109,
    severity: 'ERROR',
    code: '22P02',
    detail: undefined,
    hint: undefined,
    position: '587',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'uuid.c',
    line: '134',
    routine: 'string_to_uuid',
    sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
    parameters: undefined
  },
  original: error: invalid input syntax for type uuid: "analytics"
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 109,
    severity: 'ERROR',
    code: '22P02',
    detail: undefined,
    hint: undefined,
    position: '587',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'uuid.c',
    line: '134',
    routine: 'string_to_uuid',
    sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
    parameters: undefined
  },
  sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
  parameters: {}
}
totalCheckins: 0
mostFrequentCustomers: []
averageVisitDuration: { avg_duration_seconds: null }
checkinsByDay: []
Erro ao gerar imagem do QR Code: EagerLoadingError [SequelizeEagerLoadingError]: Restaurant is associated to User multiple times. To identify the correct association, you must use the 'as' keyword to specify the alias of the association you want to include.
    at User._getIncludedAssociation (/app/node_modules/sequelize/lib/model.js:580:13)
    at User._validateIncludedElement (/app/node_modules/sequelize/lib/model.js:502:53)
    at /app/node_modules/sequelize/lib/model.js:421:37
    at Array.map (<anonymous>)
    at User._validateIncludedElements (/app/node_modules/sequelize/lib/model.js:417:39)
    at User.findAll (/app/node_modules/sequelize/lib/model.js:1124:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async User.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async User.findByPk (/app/node_modules/sequelize/lib/model.js:1221:12)
    at async /app/backend/routes/qrcode.js:412:18
Erro ao gerar imagem do QR Code: EagerLoadingError [SequelizeEagerLoadingError]: Restaurant is associated to User multiple times. To identify the correct association, you must use the 'as' keyword to specify the alias of the association you want to include.
    at User._getIncludedAssociation (/app/node_modules/sequelize/lib/model.js:580:13)
    at User._validateIncludedElement (/app/node_modules/sequelize/lib/model.js:502:53)
    at /app/node_modules/sequelize/lib/model.js:421:37
    at Array.map (<anonymous>)
    at User._validateIncludedElements (/app/node_modules/sequelize/lib/model.js:417:39)
    at User.findAll (/app/node_modules/sequelize/lib/model.js:1124:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async User.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async User.findByPk (/app/node_modules/sequelize/lib/model.js:1221:12)
    at async /app/backend/routes/qrcode.js:412:18
Erro ao obter recompensa: Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Reward.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Reward.findOne (/app/node_modules/sequelize/lib/model.js:1240:12)
    at async Reward.findByPk (/app/node_modules/sequelize/lib/model.js:1221:12)
    at async /app/backend/routes/rewards.js:42:24 {
  name: 'SequelizeDatabaseError',
  parent: error: invalid input syntax for type uuid: "analytics"
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 109,
    severity: 'ERROR',
    code: '22P02',
    detail: undefined,
    hint: undefined,
    position: '587',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'uuid.c',
    line: '134',
    routine: 'string_to_uuid',
    sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
    parameters: undefined
  },
  original: error: invalid input syntax for type uuid: "analytics"
      at Parser.parseErrorMessage (/app/node_modules/pg-protocol/dist/parser.js:285:98)
      at Parser.handlePacket (/app/node_modules/pg-protocol/dist/parser.js:122:29)
      at Parser.parse (/app/node_modules/pg-protocol/dist/parser.js:35:38)
      at Socket.<anonymous> (/app/node_modules/pg-protocol/dist/index.js:11:42)
      at Socket.emit (node:events:524:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
    length: 109,
    severity: 'ERROR',
    code: '22P02',
    detail: undefined,
    hint: undefined,
    position: '587',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'uuid.c',
    line: '134',
    routine: 'string_to_uuid',
    sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
    parameters: undefined
  },
  sql: `SELECT "id", "title", "description", "reward_type", "value", "wheel_config", "points_required", "max_uses_per_customer", "total_uses_limit", "current_uses", "minimum_purchase", "applicable_items", "excluded_items", "valid_from", "valid_until", "days_valid", "coupon_validity_days", "auto_apply", "requires_approval", "is_active", "is_featured", "image", "terms_conditions", "trigger_conditions", "notification_settings", "analytics", "restaurant_id", "customer_id", "created_by", "created_at" AS "createdAt", "updated_at" AS "updatedAt" FROM "rewards" AS "Reward" WHERE "Reward"."id" = 'analytics';`,
  parameters: {}
}
totalCheckins: 0
mostFrequentCustomers: []
averageVisitDuration: { avg_duration_seconds: null }
checkinsByDay: []