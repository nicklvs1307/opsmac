> feedeliza-plus@1.0.0 start
> node server.js
âœ… ConexÃ£o com banco de dados estabelecida
Type of getRestaurantContextMiddleware(): function
ðŸš€ Servidor rodando na porta 5000
Redis Client Connected
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Error: WHERE parameter "user_id" has invalid "undefined" value
    at PostgresQueryGenerator.whereItemQuery (/app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)
    at /app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25
    at Array.forEach (<anonymous>)
    at PostgresQueryGenerator.whereItemsQuery (/app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)
    at PostgresQueryGenerator.getWhereConditions (/app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)
    at PostgresQueryGenerator.deleteQuery (/app/node_modules/sequelize/lib/dialects/postgres/query-generator.js:269:28)
    at PostgresQueryInterface.bulkDelete (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:403:59)
    at UserPermissionOverride.destroy (/app/node_modules/sequelize/lib/model.js:1838:42)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async setUserPermissionOverride (/app/src/domains/iam/iam.controller.js:176:5)
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Decoded userId: 29b580e3-2dcd-4da8-b7f0-650815cc304d
req.user in requirePermission: {
  id: '29b580e3-2dcd-4da8-b7f0-650815cc304d',
  name: 'Super Admin',
  email: 'superadmin@example.com',
  phone: null,
  roles: [
    Role {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false,
      UserRole: [UserRole]
    }
  ],
  avatar: undefined,
  isActive: true,
  emailVerified: undefined,
  lastLogin: undefined,
  restaurants: [
    Restaurant {
      dataValues: [Object],
      _previousDataValues: [Object],
      uniqno: 1,
      _changed: Set(0) {},
      _options: [Object],
      isNewRecord: false
    }
  ],
  restaurant: null,
  restaurantId: null,
  isSuperadmin: true,
  permissionSnapshot: { isSuperAdmin: true, permissions: {} }
}
req.user.isSuperadmin in requirePermission: true
Error: WHERE parameter "user_id" has invalid "undefined" value
    at PostgresQueryGenerator.whereItemQuery (/app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1746:13)
    at /app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1737:25
    at Array.forEach (<anonymous>)
    at PostgresQueryGenerator.whereItemsQuery (/app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:1735:35)
    at PostgresQueryGenerator.getWhereConditions (/app/node_modules/sequelize/lib/dialects/abstract/query-generator.js:2078:19)
    at PostgresQueryGenerator.deleteQuery (/app/node_modules/sequelize/lib/dialects/postgres/query-generator.js:269:28)
    at PostgresQueryInterface.bulkDelete (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:403:59)
    at UserPermissionOverride.destroy (/app/node_modules/sequelize/lib/model.js:1838:42)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async setUserPermissionOverride (/app/src/domains/iam/iam.controller.js:176:5)