AuthContext.js:82 AuthContext useEffect: Running
AuthContext.js:84 AuthContext useEffect: Token from localStorage: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkNTJhMjk1Yi00ZGJlLTRlZGEtODA1ZS03Y2U4YWZmNDhjNzEiLCJpYXQiOjE3NTc3ODc0MzIsImV4cCI6MTc1ODM5MjIzMn0.Ni_CHICuh5tauG_nXI8Vbmn9DEVPSLihZSshSrttodE
AuthContext.js:88 AuthContext useEffect: Attempting to fetch /auth/me
dashboard:1 Error while trying to use the following icon from the Manifest: https://feedelizapro.towersfy.com/logo192.png (Download error or resource isn't a valid image)
AuthContext.js:121 AuthContext useEffect: /auth/me failed: xt¬†{message: 'Network Error', name: 'AxiosError', code: 'ERR_NETWORK', config: {‚Ä¶}, request: XMLHttpRequest,¬†‚Ä¶}
(an√¥nimo) @ AuthContext.js:121
Promise.catch
(an√¥nimo) @ AuthContext.js:120
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
(an√¥nimo) @ react-dom.production.min.js:281
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
main.e96b5b26.js:2 [Violation] 'message' handler took 206ms
[Violation] Forced reflow while executing JavaScript took 51ms
AuthContext.js:163 DEBUG: Complete user object after login: {
  "message": "Login realizado com sucesso",
  "id": "d52a295b-4dbe-4eda-805e-7ce8aff48c71",
  "name": "Super Admin",
  "email": "superadmin@example.com",
  "phone": null,
  "roles": [
    {
      "id": "7d6f95d0-47c0-41ab-932a-2ac95e7c8e83",
      "restaurantId": null,
      "key": "super_admin",
      "name": "super_admin",
      "isSystem": true,
      "createdAt": "2025-09-13T17:35:36.915Z",
      "updatedAt": "2025-09-13T17:35:36.915Z",
      "restaurant_id": null,
      "UserRole": {
        "userId": "d52a295b-4dbe-4eda-805e-7ce8aff48c71",
        "restaurantId": "90c6868b-adbe-4b93-8dac-cb6e877e7751",
        "roleId": "7d6f95d0-47c0-41ab-932a-2ac95e7c8e83",
        "createdAt": "2025-09-13T17:35:37.615Z",
        "updatedAt": "2025-09-13T17:35:37.615Z",
        "role_id": "7d6f95d0-47c0-41ab-932a-2ac95e7c8e83",
        "user_id": "d52a295b-4dbe-4eda-805e-7ce8aff48c71",
        "restaurant_id": "90c6868b-adbe-4b93-8dac-cb6e877e7751"
      }
    }
  ],
  "isActive": true,
  "restaurants": [
    {
      "id": "90c6868b-adbe-4b93-8dac-cb6e877e7751",
      "name": "Restaurante Padr√£o",
      "slug": "restaurante-padrao",
      "description": null,
      "address": "Rua Padr√£o, 123",
      "city": "Cidade Padr√£o",
      "state": "SP",
      "zipCode": null,
      "phone": null,
      "email": null,
      "website": null,
      "logo": null,
      "planKey": null,
      "status": "active",
      "permVersion": "1",
      "createdAt": "2025-09-13T17:35:37.604Z",
      "updatedAt": "2025-09-13T17:35:37.604Z"
    }
  ],
  "restaurant": null,
  "restaurantId": null,
  "isSuperadmin": true,
  "permissionSnapshot": {
    "restaurantId": "90c6868b-adbe-4b93-8dac-cb6e877e7751",
    "userId": "d52a295b-4dbe-4eda-805e-7ce8aff48c71",
    "permVersion": "1",
    "modules": [
      {
        "id": "b104055d-a083-4a1b-8abf-e7e78052549c",
        "key": "dashboard",
        "name": "Dashboard",
        "submodules": [
          {
            "id": "bce90959-43bd-4fb1-acf5-28756b491cee",
            "key": "general",
            "name": "Geral",
            "features": [
              {
                "id": "0185a3bf-75b1-42fd-bf7a-1682e1f272dd",
                "key": "dashboard:general:view",
                "name": "Visualizar Painel Geral",
                "actions": [
                  {
                    "id": 1,
                    "key": "create",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 2,
                    "key": "read",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 3,
                    "key": "update",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 4,
                    "key": "delete",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 5,
                    "key": "export",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 6,
                    "key": "approve",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 7,
                    "key": "manage_permissions",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  }
                ],
                "isLockedByEntitlement": false
              }
            ],
            "isLockedByEntitlement": false
          }
        ],
        "isLockedByEntitlement": false
      },
      {
        "id": "7bf866aa-79a8-4f52-84e7-41294ad47233",
        "key": "fidelity",
        "name": "Fidelidade",
        "submodules": [
          {
            "id": "4ae9e074-5b5e-4e52-ba66-ddbbd177be97",
            "key": "general",
            "name": "Geral",
            "features": [
              {
                "id": "46185b59-6cfa-449f-875f-404f3159a237",
                "key": "fidelity:general:dashboard",
                "name": "Painel Inicial",
                "actions": [
                  {
                    "id": 1,
                    "key": "create",
                    "allowed": true,
                    "locked": false,
                    "reason": "Granted by role"
                  },
                  {
                    "id": 2,
                    "key": "read",
                    "allowed": true,
                    "loc
main.e96b5b26.js:2 [Violation] 'message' handler took 287ms
checkinService.js:43  GET https://feedelizaapi.towersfy.com/api/checkin/analytics/90c6868b-adbe-4b93-8dac-cb6e877e7751 500 (Internal Server Error)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
enabled @ checkinService.js:43
fetchFn @ query.js:300
c @ retryer.js:95
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
(an√¥nimo) @ react-dom.production.min.js:281
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
checkinService.js:43  GET https://feedelizaapi.towersfy.com/api/checkin/analytics/90c6868b-adbe-4b93-8dac-cb6e877e7751 500 (Internal Server Error)
(an√¥nimo) @ xhr.js:195
xhr @ xhr.js:15
Ur @ dispatchRequest.js:51
Promise.then
_request @ Axios.js:163
request @ Axios.js:40
Xr.<computed> @ Axios.js:213
(an√¥nimo) @ bind.js:5
enabled @ checkinService.js:43
fetchFn @ query.js:300
c @ retryer.js:95
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
(an√¥nimo) @ react-dom.production.min.js:281
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14
query.js:358 xt¬†{message: 'Request failed with status code 500', name: 'AxiosError', code: 'ERR_BAD_RESPONSE', config: {‚Ä¶}, request: XMLHttpRequest,¬†‚Ä¶}
onError @ query.js:358
f @ retryer.js:67
(an√¥nimo) @ retryer.js:132
Promise.catch
c @ retryer.js:116
(an√¥nimo) @ retryer.js:149
Promise.then
(an√¥nimo) @ retryer.js:145
Promise.catch
c @ retryer.js:116
u @ retryer.js:156
t.fetch @ query.js:332
r.executeFetch @ queryObserver.js:199
r.onSubscribe @ queryObserver.js:40
t.subscribe @ subscribable.js:16
(an√¥nimo) @ useBaseQuery.js:60
nl @ react-dom.production.min.js:243
_c @ react-dom.production.min.js:285
(an√¥nimo) @ react-dom.production.min.js:281
_ @ scheduler.production.min.js:13
P @ scheduler.production.min.js:14


> feedeliza-plus@1.0.0 start
> node server.js
2025-09-13 18:18:25 [info]: 	‚úÖ Conex√£o com banco de dados estabelecida
2025-09-13 18:18:32 [info]: 	üöÄ Servidor rodando na porta 5000
Redis Client Error ConnectionTimeoutError: Connection timeout
    at Socket.<anonymous> (/app/node_modules/@redis/client/dist/lib/client/socket.js:177:124)
    at Object.onceWrapper (node:events:638:28)
    at Socket.emit (node:events:524:28)
    at Socket._onTimeout (node:net:595:8)
    at listOnTimeout (node:internal/timers:581:17)
    at process.processTimers (node:internal/timers:519:7)
Redis Client Connected
2025-09-13 18:19:09 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:09 +0000] "OPTIONS /api/auth/login HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 18:19:10 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:10 +0000] "POST /api/auth/login HTTP/1.1" 200 1516 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 18:19:10 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:10 +0000] "OPTIONS /api/iam/tree?restaurantId=90c6868b-adbe-4b93-8dac-cb6e877e7751 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71
[IamService] Building permission snapshot for userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71, restaurantId: 90c6868b-adbe-4b93-8dac-cb6e877e7751
2025-09-13 18:19:11 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:11 +0000] "GET /api/iam/tree?restaurantId=90c6868b-adbe-4b93-8dac-cb6e877e7751 HTTP/1.1" 200 91225 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 18:19:12 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:12 +0000] "OPTIONS /api/dashboard/90c6868b-adbe-4b93-8dac-cb6e877e7751/analytics?period=30d HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71
2025-09-13 18:19:12 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:12 +0000] "GET /api/dashboard/90c6868b-adbe-4b93-8dac-cb6e877e7751/analytics?period=30d HTTP/1.1" 304 - "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 18:19:22 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:22 +0000] "OPTIONS /api/iam/check HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71
[IamService] Checking permission for userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71, restaurantId: 90c6868b-adbe-4b93-8dac-cb6e877e7751, featureKey: fidelity:checkin:dashboard, actionKey: read, isSuperadmin: true
2025-09-13 18:19:22 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:22 +0000] "POST /api/iam/check HTTP/1.1" 200 60 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
2025-09-13 18:19:22 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:22 +0000] "OPTIONS /api/checkin/analytics/90c6868b-adbe-4b93-8dac-cb6e877e7751 HTTP/1.1" 204 0 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Decoded userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71
2025-09-13 18:19:23 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:23 +0000] "GET /api/checkin/analytics/90c6868b-adbe-4b93-8dac-cb6e877e7751 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getCheckinAnalytics (/app/src/domains/checkin/checkin.service.js:325:39)
    at async getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:67:31)
Decoded userId: d52a295b-4dbe-4eda-805e-7ce8aff48c71
2025-09-13 18:19:24 [info]: 	170.254.46.100 - - [13/Sep/2025:18:19:24 +0000] "GET /api/checkin/analytics/90c6868b-adbe-4b93-8dac-cb6e877e7751 HTTP/1.1" 500 148 "https://feedelizapro.towersfy.com/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36"
Error
    at Query.run (/app/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)
    at /app/node_modules/sequelize/lib/sequelize.js:315:28
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async PostgresQueryInterface.select (/app/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)
    at async Checkin.findAll (/app/node_modules/sequelize/lib/model.js:1140:21)
    at async Object.getCheckinAnalytics (/app/src/domains/checkin/checkin.service.js:325:39)
    at async getCheckinAnalytics (/app/src/domains/checkin/checkin.controller.js:67:31)